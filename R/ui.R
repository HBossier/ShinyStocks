####################
#### TITLE:     Shiny App to check key stock information: ui.R part
#### Contents:  Raw Code
#### Author: Han Bossier
#### Source Files: //Github/HBossier
#### First Modified: 11/03/2017
#### Notes:
#################


##
##########
### Notes
##########
##


# This is a Shiny web application. To run, open this file in RStudio and click the
# 'Run App' button above.

##
##########
### Preparation
##########
##

# Load in packages
library(shiny)
library(tidyquant)
library(ggplot2)
library(dplyr)
library(tidyr)
require(repmis)


# For development:
LOCAL <- FALSE
if(isTRUE(LOCAL)){
  wd <- '/Users/hanbossier/Dropbox/StocksApp/'
  setwd(wd)
}


##
##########
### Stocks
##########
##

# Check whether we are running the app locally (correct WD)
WD <- getwd()
if(grepl(pattern = 'StocksApp', x = WD)){
  # Load the stocks for which we will get data
  load('Euronext.RDa')
}else{
  repmis::source_data("https://github.com/HBossier/ShinyStocks/blob/master/R/Euronext.RDa?raw=true")
}

# Markets
markets <- Stocks %>% select(Market) %>% unique() %>% filter(grepl('Euronext', x = Market, ignore.case = TRUE))

# Define UI for application
ui <- fluidPage(
  
  # Application title
  titlePanel("wtclassic's Stock Picks"),
  
  # Define the sidebar
  sidebarLayout(
    sidebarPanel(
      # Drop down menu to select the market
      selectInput("markets", label = 'Markets', choices = markets, selected = 'Euronext Brussels'),
      
      # Drop down menu to select the stocks: this depends on choice of market, defined in server function below.
      uiOutput("stockSelection"),
      
      # Number of weeks to plot
      numericInput("weeks", "Number of weeks", value = 52, min = 1, max = 260),
      
      # Drop down menu to select plot type
      selectInput("PlotType", label = 'Type of Plot', choices = c("Line Bar", "Candlestick"), selected = 'Stock Prices'),

      # Checkbox for weighted averages
      checkboxGroupInput("WA", label = "Weighted average over x days", 
                                choices = list("150" = 1, 
                                               "20" = 2, "50" = 3),
                                selected = NULL, inline = TRUE),
      numericInput("manWA", "or input x days:", value = 0, min = 1, max = 1800)
      
      # Checkbox for band
    ),
    # Show the candle plot
    mainPanel(
      plotOutput("candlePlot")
    )
  )
  

  # # Main panel with plot
  # sidebarLayout(
  #     mainPanel(
  #        plotOutput("candlePlot")
  #     )
  #   )
  
  # # Sidebar with a slider input for number of bins 
  # sidebarLayout(
  #   sidebarPanel(
  #     sliderInput("bins",
  #                 "Number of weeks:",
  #                 min = 1,
  #                 max = 260,
  #                 value = 20)
  #   ),
  #   
  #   # Show a plot of the generated distribution
  #   mainPanel(
  #     plotOutput("distPlot")
  #   )
  # )
)

